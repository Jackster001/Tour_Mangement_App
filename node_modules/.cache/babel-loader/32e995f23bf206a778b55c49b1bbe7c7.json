{"ast":null,"code":"import _objectSpread from \"/Users/jackie/Desktop/Projects/Tour_Mangement_App/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport { db, auth, storageRef, admin } from \"../components/Firebase\";\n\nconst resetChanged = () => {\n  return {\n    type: \"RESET_CHANGED\"\n  };\n};\n\nconst userResetChanged = () => {\n  return {\n    type: \"USER_RESET_CHANGED\"\n  };\n};\n\nconst userAddedChanged = () => {\n  return {\n    type: \"USER_ADDED\"\n  };\n};\n\nconst getSingleUser = id => {\n  let user = {};\n  let stringId = '' + id + '';\n  return dispatch => {\n    dispatch({\n      type: \"CHANGE_LOADING\"\n    });\n    let docRef = db.collection(\"users\").doc(stringId);\n    docRef.get().then(function (doc) {\n      if (doc.exists) {\n        user = doc.data();\n        user = _objectSpread({}, user, {\n          id\n        });\n      } else {\n        console.log(\"Something went wrong!\");\n      }\n\n      dispatch({\n        type: \"USERS_SELECT\",\n        payload: user,\n        id: id\n      });\n    }).catch(function (error) {\n      console.log(\"Error getting document:\", error);\n    });\n  };\n};\n\nconst getUsers = () => {\n  let data = [];\n  return dispatch => {\n    db.collection(\"users\").get().then(function (querySnapshot) {\n      querySnapshot.forEach(function (doc) {\n        let users = doc.data();\n        users = _objectSpread({\n          id: doc.id\n        }, users);\n        data = [users, ...data];\n        data.sort(function (a, b) {\n          return a.dateCreated.seconds - b.dateCreated.seconds;\n        }).reverse();\n      });\n      dispatch({\n        type: \"USERS_GET\",\n        payload: data\n      });\n    }).catch(function (error) {\n      console.log(\"Error getting document:\", error);\n    });\n  };\n};\n\nconst recievingUsers = () => {\n  return {\n    type: \"GETTING_USERS\"\n  };\n};\n\nconst addUser = user => {\n  return dispatch => {\n    storageRef.ref(\"user.png\").getDownloadURL().then(url => {\n      let email = user.userName + \"@sbnyc.com\";\n      auth.createUserWithEmailAndPassword(email, user.password).then(response => {\n        db.collection(\"users\").doc(response.user.uid).set({\n          id: response.user.uid,\n          dateCreated: user.dateCreated,\n          groupName: user.groupName,\n          groupPin: user.groupPin,\n          userType: user.userType,\n          userName: user.userName,\n          firstName: user.firstName,\n          lastName: user.lastName,\n          phoneNumber: user.phoneNumber,\n          password: user.password,\n          tourGuide: user.tourGuide,\n          leadChaperone: user.leadChaperone,\n          profilePicture: url,\n          emergencyContact: user.emergencyContact\n        });\n        user = _objectSpread({}, user, {\n          id: response.user.uid,\n          profilePicture: url\n        });\n        dispatch({\n          type: 'USER_ADD',\n          payload: user\n        });\n      });\n    }).catch(error => {\n      console.log({\n        error\n      });\n    });\n  };\n};\n\nconst deleteUser = id => {\n  db.collection(\"users\").doc(id).delete().then(function () {\n    console.log(\"Student successfully deleted!\");\n  }).catch(function (error) {\n    console.error(\"Error removing document: \", error);\n  });\n  return {\n    type: \"USER_DELETE\",\n    id: id\n  };\n};\n\nconst finishedDeletingUser = () => {\n  return {\n    type: \"FINISHED_DELETING\"\n  };\n};\n\nconst setUser = user => {\n  return dispatch => {\n    db.collection(\"users\").doc(user.id).set(user).then(function () {\n      dispatch({\n        type: \"USER_CHANGE_LOADING\"\n      });\n      dispatch({\n        type: \"USER_SET\",\n        payload: user\n      });\n    }).catch(function (error) {\n      console.error(\"Error writing document: \", error);\n    });\n  };\n};\n\nexport { getUsers, recievingUsers, addUser, deleteUser, getSingleUser, setUser, userAddedChanged, resetChanged, userResetChanged, finishedDeletingUser };","map":{"version":3,"sources":["/Users/jackie/Desktop/Projects/Tour_Mangement_App/src/Action/userAction.js"],"names":["db","auth","storageRef","admin","resetChanged","type","userResetChanged","userAddedChanged","getSingleUser","id","user","stringId","dispatch","docRef","collection","doc","get","then","exists","data","console","log","payload","catch","error","getUsers","querySnapshot","forEach","users","sort","a","b","dateCreated","seconds","reverse","recievingUsers","addUser","ref","getDownloadURL","url","email","userName","createUserWithEmailAndPassword","password","response","uid","set","groupName","groupPin","userType","firstName","lastName","phoneNumber","tourGuide","leadChaperone","profilePicture","emergencyContact","deleteUser","delete","finishedDeletingUser","setUser"],"mappings":"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","sourcesContent":["import {db,auth, storageRef, admin} from \"../components/Firebase\";\nconst resetChanged =() =>{\n    return{\n        type: \"RESET_CHANGED\"\n    }\n}\nconst userResetChanged =() =>{\n    return{\n        type: \"USER_RESET_CHANGED\"\n    }\n}\nconst userAddedChanged =() =>{\n    return{\n        type: \"USER_ADDED\"\n    }\n}\nconst getSingleUser= (id)=>{\n    let user={}\n    let stringId=''+id+'';\n    return (dispatch)=>{\n        dispatch({\n            type: \"CHANGE_LOADING\"\n        })\n        let docRef=db.collection(\"users\").doc(stringId)\n        docRef.get().then(function(doc){\n        if(doc.exists){\n            user=doc.data();\n            user={...user, id}\n        } else{\n            console.log(\"Something went wrong!\")\n        }\n        dispatch({\n            type: \"USERS_SELECT\",\n            payload: user,\n            id: id\n        })\n    }).catch(function(error) {\n        console.log(\"Error getting document:\", error);\n    });\n    }\n}\nconst getUsers = () =>{\n    let data=[];\n    return (dispatch) => {\n        db.collection(\"users\").get().then(function(querySnapshot) {\n            querySnapshot.forEach(function(doc) {\n            let users = doc.data();\n            users= {id:doc.id,...users}\n            data=[users, ...data];\n            data.sort(function(a,b){\n                return  a.dateCreated.seconds - b.dateCreated.seconds\n            }).reverse();\n            })           \n            dispatch({\n                type: \"USERS_GET\",\n                payload: data\n            })\n         })\n         .catch(function(error){\n            console.log(\"Error getting document:\", error);\n         })\n    }\n}\nconst recievingUsers = () =>{\n    return {\n        type: \"GETTING_USERS\"\n    }\n}\nconst addUser = (user)=>{\n    return(dispatch)=>{\n            storageRef.ref(\"user.png\").getDownloadURL().then(url=>{\n                let email= user.userName + \"@sbnyc.com\"\n                    auth.createUserWithEmailAndPassword(email, user.password)\n                    .then(response=>{\n                    db.collection(\"users\").doc(response.user.uid).set({\n                        id:response.user.uid,\n                        dateCreated: user.dateCreated,\n                        groupName: user.groupName,\n                        groupPin: user.groupPin,\n                        userType: user.userType,\n                        userName: user.userName,\n                        firstName: user.firstName,\n                        lastName: user.lastName,\n                        phoneNumber: user.phoneNumber,\n                        password: user.password,\n                        tourGuide: user.tourGuide,\n                        leadChaperone: user.leadChaperone,\n                        profilePicture: url,\n                        emergencyContact: user.emergencyContact\n                        \n                    })\n                    user={\n                        ...user,\n                        id: response.user.uid,\n                        profilePicture: url\n                    }\n                    dispatch({\n                        type: 'USER_ADD',\n                        payload: user\n                    })\n                    })\n                }).catch(error => {\n                console.log({ error });\n            })\n    }    \n}\nconst deleteUser = (id) =>{\n    db.collection(\"users\").doc(id).delete().then(function(){\n        console.log(\"Student successfully deleted!\");\n    }).catch(function(error) {\n        console.error(\"Error removing document: \", error);\n    });\n    return{\n        type: \"USER_DELETE\",\n        id: id\n    }\n}\nconst finishedDeletingUser = () =>{\n    return{\n        type: \"FINISHED_DELETING\"\n    }\n}\nconst setUser = (user) =>{\n    \n    return(dispatch)=>{\n        db.collection(\"users\").doc(user.id).set(user).then(function() {\n            dispatch({\n                type: \"USER_CHANGE_LOADING\"\n            })\n            dispatch({\n                type:\"USER_SET\",\n                payload: user\n            })\n        })\n        .catch(function(error) {\n            console.error(\"Error writing document: \", error);\n        });\n    } \n}\nexport {getUsers, recievingUsers, addUser, deleteUser, getSingleUser, setUser, userAddedChanged, resetChanged, userResetChanged, finishedDeletingUser};"]},"metadata":{},"sourceType":"module"}