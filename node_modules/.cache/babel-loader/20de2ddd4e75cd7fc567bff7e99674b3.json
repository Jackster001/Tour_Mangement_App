{"ast":null,"code":"import _objectSpread from \"/Users/jackie/Desktop/Projects/Tour_Mangement_App/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport { db, storageRef } from \"../components/Firebase\";\nimport { file } from \"@babel/types\";\n\nconst selectGroup = id => {\n  let groupData = {};\n  let stringId = '' + id + '';\n  return dispatch => {\n    let docRef = db.collection(\"groups\").doc(stringId);\n    docRef.get().then(function (doc) {\n      if (doc.exists) {\n        let group = doc.data();\n        groupData = _objectSpread({}, group, {\n          id\n        });\n      } else {\n        console.log(\"Something went wrong!\");\n      }\n\n      dispatch({\n        type: \"GROUP_SELECT\",\n        payload: groupData,\n        id: id\n      });\n    }).catch(function (error) {\n      console.log(\"Error getting document:\", error);\n    });\n  };\n};\n\nconst selectGroupChanging = () => {\n  return {\n    type: \"GROUP_SELECT_CHANGED\"\n  };\n};\n\nconst getGroups = () => {\n  let data = Object.assign([]);\n  return dispatch => {\n    db.collection(\"groups\").get().then(function (querySnapshot) {\n      querySnapshot.forEach(function (doc) {\n        let group = doc.data(); // let GroupLogoUrl= storageRef.child('groupLogos/'+ group.groupLogoName).getDownloadURL()\n\n        group = _objectSpread({\n          id: doc.id\n        }, group);\n        data = [...data, group];\n      });\n      dispatch({\n        type: \"GROUPS_GET\",\n        payload: data\n      });\n    }).catch(function (error) {\n      console.log(\"Error getting document:\", error);\n    });\n  };\n};\n\nconst addGroup = group => {\n  return dispatch => {\n    storageRef.ref('groupLogos').child(group.GroupLogo.name).put(group.GroupLogo, {\n      contentType: group.GroupLogo.type\n    }).then(() => {\n      storageRef.ref('groupLogos').child(group.GroupLogo.name).getDownloadURL().then(url => {\n        db.collection(\"groups\").add({\n          name: group.GroupName,\n          pin: group.GroupPin,\n          groupLogo: url\n        }).then(function () {\n          console.log(url);\n\n          let newGroup = _objectSpread({}, group, {\n            groupLogo: url\n          });\n\n          dispatch({\n            type: 'GROUP_ADD',\n            payload: newGroup\n          });\n        }).catch(error => {\n          console.log({\n            error\n          });\n        });\n      }).catch(error => {\n        console.log({\n          error\n        });\n      });\n    }).catch(error => {\n      console.log({\n        error\n      });\n    });\n  };\n};\n\nconst groupAdded = () => {\n  return {\n    type: 'GROUP_ADDED'\n  };\n};\n\nconst deleteGroup = id => {\n  db.collection(\"groups\").doc(id).delete().then(function () {\n    console.log(\"Group successfully deleted!\");\n  }).catch(function (error) {\n    console.error(\"Error removing document: \", error);\n  });\n  return {\n    type: \"GROUP_DELETE\",\n    id: id\n  };\n};\n\nconst editGroup = (group, logoChanged) => {\n  return dispatch => {\n    if (logoChanged) {\n      storageRef.ref('groupLogos').child(group.groupLogo.name).put(group.groupLogo, {\n        contentType: group.groupLogo.type\n      }).then(() => {\n        storageRef.ref('groupLogos').child(group.groupLogo.name).getDownloadURL().then(url => {\n          db.collection(\"groups\").doc(group.id).set({\n            name: group.name,\n            pin: group.pin,\n            groupLogo: url\n          }).then(function () {\n            let newGroup = _objectSpread({}, group, {\n              groupLogo: url\n            });\n\n            dispatch({\n              type: 'EDIT_GROUP',\n              payload: newGroup\n            });\n          }).catch(error => {\n            console.log({\n              error\n            });\n          });\n        }).catch(error => {\n          console.log({\n            error\n          });\n        });\n      }).catch(error => {\n        console.log({\n          error\n        });\n      });\n    } else {\n      db.collection(\"groups\").doc(group.id).set(group).then(function () {\n        dispatch({\n          type: \"EDIT_GROUP\",\n          payload: group\n        });\n      }).catch(function (error) {\n        console.error(\"Error writing document: \", error);\n      });\n    }\n  };\n};\n\nconst groupChanged = () => {\n  return {\n    type: \"GROUP_CHANGED\"\n  };\n};\n\nexport { getGroups, addGroup, groupAdded, deleteGroup, selectGroup, selectGroupChanging, editGroup, groupChanged };","map":{"version":3,"sources":["/Users/jackie/Desktop/Projects/Tour_Mangement_App/src/Action/groupAction.js"],"names":["db","storageRef","file","selectGroup","id","groupData","stringId","dispatch","docRef","collection","doc","get","then","exists","group","data","console","log","type","payload","catch","error","selectGroupChanging","getGroups","Object","assign","querySnapshot","forEach","addGroup","ref","child","GroupLogo","name","put","contentType","getDownloadURL","url","add","GroupName","pin","GroupPin","groupLogo","newGroup","groupAdded","deleteGroup","delete","editGroup","logoChanged","set","groupChanged"],"mappings":"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","sourcesContent":["import {db, storageRef} from \"../components/Firebase\";\nimport { file } from \"@babel/types\";\n\nconst selectGroup= (id)=>{\n    let groupData={}\n    let stringId=''+id+'';\n    return (dispatch)=>{\n        let docRef=db.collection(\"groups\").doc(stringId)\n        docRef.get().then(function(doc){\n        if(doc.exists){\n            let group=doc.data();\n            groupData={...group, id}\n        } else{\n            console.log(\"Something went wrong!\")\n        }\n        dispatch({\n            type: \"GROUP_SELECT\",\n            payload: groupData,\n            id: id\n        })\n    }).catch(function(error) {\n        console.log(\"Error getting document:\", error);\n    });\n    }\n}\nconst selectGroupChanging=()=>{\n    return{\n        type:\"GROUP_SELECT_CHANGED\"\n    }\n}\nconst getGroups = () =>{\n    let data=Object.assign([])\n    return (dispatch) => {\n        db.collection(\"groups\").get().then(function(querySnapshot) {\n            querySnapshot.forEach(function(doc) {\n            let group = doc.data();\n            // let GroupLogoUrl= storageRef.child('groupLogos/'+ group.groupLogoName).getDownloadURL()\n            group= {id:doc.id,...group}\n            data=[...data, group]\n            })           \n            dispatch({\n                type: \"GROUPS_GET\",\n                payload: data\n            })\n         })\n         .catch(function(error){\n            console.log(\"Error getting document:\", error);\n         })\n    }\n}\nconst addGroup = (group)=>{\n    return (dispatch)=>{\n        storageRef.ref('groupLogos').child(group.GroupLogo.name)\n        .put(group.GroupLogo,{contentType:group.GroupLogo.type})\n        .then(()=>{\n            storageRef.ref('groupLogos').child(group.GroupLogo.name).getDownloadURL().then(url=>{\n                db.collection(\"groups\").add({\n                    name: group.GroupName,\n                    pin: group.GroupPin,\n                    groupLogo:url\n                }).then(function(){\n                    console.log(url);\n                    let newGroup={...group, groupLogo:url}\n                        dispatch({type: 'GROUP_ADD',\n                        payload: newGroup})\n                }).catch(error => {\n                    console.log({ error });\n                });\n            }).catch(error => {\n                console.log({ error });\n            })\n        }).catch(error => {\n            console.log({ error });\n    })}\n}\nconst groupAdded=()=>{\n    return {\n        type: 'GROUP_ADDED'\n    }\n}\nconst deleteGroup = (id) =>{\n    db.collection(\"groups\").doc(id).delete().then(function(){\n        console.log(\"Group successfully deleted!\");\n    }).catch(function(error) {\n        console.error(\"Error removing document: \", error);\n    });\n    return{\n        type: \"GROUP_DELETE\",\n        id: id\n    }\n}\nconst editGroup = (group, logoChanged) =>{\n    return(dispatch)=>{\n        if(logoChanged){\n            storageRef.ref('groupLogos').child(group.groupLogo.name)\n            .put(group.groupLogo,{contentType:group.groupLogo.type})\n            .then(()=>{\n            storageRef.ref('groupLogos').child(group.groupLogo.name).getDownloadURL().then(url=>{\n                db.collection(\"groups\").doc(group.id).set({\n                    name: group.name,\n                    pin: group.pin,\n                    groupLogo:url\n                }).then(function(){\n                    let newGroup={...group, groupLogo:url}\n                    dispatch({type: 'EDIT_GROUP',\n                    payload: newGroup})\n                }).catch(error => {\n                    console.log({ error });\n                });\n            }).catch(error => {\n                console.log({ error });\n            })\n        }).catch(error => {\n            console.log({ error });\n        })\n        }\n        else{\n            db.collection(\"groups\").doc(group.id).set(group).then(function() {\n            dispatch({\n                type:\"EDIT_GROUP\",\n                payload: group\n            })\n            })\n            .catch(function(error) {\n                console.error(\"Error writing document: \", error);\n            });\n        }\n       \n    } \n}\nconst groupChanged=()=>{\n    return{\n        type: \"GROUP_CHANGED\"\n    }\n}\nexport {getGroups, addGroup, groupAdded, deleteGroup, selectGroup, selectGroupChanging, editGroup, groupChanged}"]},"metadata":{},"sourceType":"module"}